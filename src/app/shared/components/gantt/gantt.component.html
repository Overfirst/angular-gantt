<gantt-periods
  [disabled]="modalOpened"
  (periodChange)="periodChange($event)">
</gantt-periods>

<div #mainRef class="gantt-content" (click)="modalOpened = false">
  <div #tasksRef>
    <gantt-tasks
      [contentHeight]="contentHeight"
      [tasksRows]="tasksRows"
      [scrollTop]="tasksScrollTop"
      [activeRow]="activeRow"
      (onScroll)="tasksOnScroll($event)"
      (rowChanged)="changeRow($event)"
      (dateClicked)="tasksDateClick($event)"
      (openCloseClicked)="openCloseClicked($event)"
      (editTaskClicked)="editTaskClicked($event)"
    ></gantt-tasks>
  </div>

  <div #timelineRef>
    <gantt-timeline
      [contentHeight]="contentHeight"
      [width]="timelineWidth"
      [tasksRows]="visibleRows"
      [dependencies]="dependencies"
      [scrollTop]="timelineScrollTop"
      [activeRow]="activeRow"
      [period]="period"
      [selectedDate]="selectedDate"
      (onScroll)="timelineOnScroll($event)"
      (rowChanged)="changeRow($event)"
      (editTaskClicked)="editTaskClicked($event)"
    ></gantt-timeline>
  </div>

  <div *ngIf="modalOpened" class="modal-overlay">
    <div (click)="modalClicked($event)" class="edit-modal-container">
      <gantt-edit-modal
        [data]="editModalData"
        (closeClicked)="modalCloseClicked($event)"
        (deleteClicked)="modalDeleteClicked($event)"
        (saveClicked)="modalSaveClicked($event)"
        (cancelClicked)="modalCancelClicked($event)"
      ></gantt-edit-modal>
    </div>
  </div>
</div>