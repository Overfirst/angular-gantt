<div [style.width]="width + 'px'" class="gantt-timeline">
  <div (click)="selectRow(-1)" #header class="timeline-header">
    <table>
      <thead>
        <tr>
          <td
            *ngFor="let part of periodParts"
            [attr.colspan]="service.colspanForHeader(period, part.main)"
            nowrap
          >
            <ng-container [ngSwitch]="period">
              <span *ngSwitchCase="'Day'">{{ part.main | date:"MMMM, cccc, dd" }}</span>
              <span *ngSwitchCase="'Week'">{{ part.main | date:"MMMM dd" }} – {{ service.weekEnd(part.main) | date:"MMMM dd" }}</span>
              <span *ngSwitchCase="'Month'">{{ part.main | date:"MMMM YYYY" }}</span>
            </ng-container>
          </td>
        </tr>
        <tr>
          <ng-container *ngFor="let part of periodParts">
            <td
              *ngFor="let detail of part.detail"
              [attr.colspan]="service.colspanForDetail(period, detail)"
              nowrap
            >
              <ng-container [ngSwitch]="period">
                <span *ngSwitchCase="'Day'">{{ detail | date:"HH:mm" }}</span>
                <span *ngSwitchCase="'Week'">{{ detail | date:"ccc, dd.MM" }}</span>
                <span *ngSwitchCase="'Month'">{{ detail | date:"dd" }} – {{ service.addWeekForMonth(detail) | date:"dd" }}</span>
              </ng-container>
            </td>
          </ng-container>
        </tr>
      </thead>
    </table>
  </div>

  <div class="content">
    <div #mainTable [style.height]="contentHeight + 'px'" class="main-tables">
      <div class="main-table">
        <table>
          <tbody>
            <tr
              *ngFor="let task of tasks; index as idx"
              (click)="selectRow(idx)"
              [class.active-row]="activeRowID === idx"
            >
              <ng-container *ngFor="let part of periodParts">
                <td
                  *ngFor="let detail of part.detail"
                  nowrap
                >&nbsp;</td>
              </ng-container>
            </tr>
          </tbody>
        </table>
      </div>
  
      <div class="main-table">
        <table>
          <tbody>
            <tr *ngFor="let task of tasks; index as idx" >
              <td>
                <gantt-task-progress
                  [data]="{ taskInfo: { task: task, rowID: idx }, period: period, minDate: periodParts[0].detail[0] }"
                  (click)="selectRow(idx)"
                  (dataChanged)="taskProgressDataChanged($event)"
                ></gantt-task-progress>
              </td>
            </tr>
          </tbody>
        </table>
        <gantt-dependencies
          [data]="{
            tasksInfo: tasksTimelineData,
            dependencies: dependencies,
            period: period
          }"
        ></gantt-dependencies>
      </div>
    </div>
  </div>
</div>